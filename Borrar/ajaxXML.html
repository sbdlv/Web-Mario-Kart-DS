<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <img src="img/karts/B Dasher.png"
         alt="">
</body>
<script>
    //Variables
    const BASE_URL_THUMB = "img/karts/",
        FORMATO_THUMB = ".png";

    var datosXML;
    var karts;

    //Clase Kart
    class Kart {
        constructor(nombre, propietario, velocidad, aceleracion, peso, manejo, drift, items) {
            this.nombre = nombre;
            this.propietario = propietario;
            this.velocidad = velocidad;
            this.aceleracion = aceleracion;
            this.peso = peso;
            this.manejo = manejo;
            this.drift = drift;
            this.items = items;
        }
    }

    //XML

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            datosXML = this.responseXML;
        }
    };
    xhttp.open("GET", "karts.xml", true);
    xhttp.send();

    function consultarPersonaje(nombre) {
        let path = "karts/kart[propietario='" + nombre + "']";
        var nodes = datosXML.evaluate(path, datosXML, null, XPathResult.ANY_TYPE, null);
        var result = nodes.iterateNext();
        while (result) {
            let nombre = result.getElementsByTagName("nombre")[0].innerHTML;
            console.log(nombre);

            let thumb = document.createElement("img");
            thumb.setAttribute("src", BASE_URL_THUMB + nombre + FORMATO_THUMB);
            document.body.appendChild(thumb);
            /*
            console.log(result);*/
            result = nodes.iterateNext();
        }
    }

    function trig(nom){
        let temp = consultarKart(nom);
        console.log(temp.nombre);
        console.log(temp.propietario);    
    }

    function consultarKart(kart) {
        let path = "karts/kart[nombre='" + kart + "']";
        var nodes = datosXML.evaluate(path, datosXML, null, XPathResult.ANY_TYPE, null);
        var result = nodes.iterateNext();
        var kart = new Kart();

        kart.nombre = result.getElementsByTagName("nombre")[0].innerHTML;
        kart.propietario = result.getElementsByTagName("propietario")[0].innerHTML;
        kart.velocidad = result.getElementsByTagName("velocidad")[0].innerHTML;
        kart.aceleracion = result.getElementsByTagName("aceleracion")[0].innerHTML;
        kart.peso = result.getElementsByTagName("peso")[0].innerHTML;
        kart.manejo = result.getElementsByTagName("manejo")[0].innerHTML;
        kart.drift = result.getElementsByTagName("drift")[0].innerHTML;
        kart.items = result.getElementsByTagName("items")[0].innerHTML;

        return kart;
    }

    

    /*var i;
datosXML = xml.responseXML;
karts = datosXML.getElementsByTagName("kart");  */


</script>

</html>